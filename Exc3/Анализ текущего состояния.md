# Анализ текущего состояния

## Проблемы и риски

1. сильная связанность между сервисами core-app, ins-product-aggregator, ins-comp-settlement
2. синхронное взаимодействие между сервисами и при этом присутствуют задержки ответов и ошибки при взаимодействии с внешними API
3. увеличение времени ответа при увеличении числа страховых компаний, к которым будет происходить вызов, т.к. в запросах к ins-product-aggregator ожидаем ответа от всех страховых компаний и только после этого возвращаем ответ

## Предлагаемое решение

Реализовать ассинхроное взаимодействие между сервисами core-app, ins-product-aggregator, ins-comp-settlement. Выделив при этом два потока данных:
1. страховые продукты (producer ins-product-aggregator)
2. оформленные страховки (producer core-app)

Также к сервису ins-comp-settlement нужно применить паттерн Transactional Outbox. Сейчас проблем в данном сервисе не выявленно, но нет гарантий что они не проявятся при увеличении нагрузки. Данные сервис осуществзяем взаиморасчеты со страховыми компаний, что с точки зрения бизнеса является важным моментом и вылпаты не должны быть утеряны.

